<!DOCTYPE html>
<html lang="ru">
<head>
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>glowqr</title>

  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">

  <link rel="apple-touch-icon" sizes="180x180" href="/icon-180.png">
  <link rel="apple-touch-icon" sizes="167x167" href="icon-167.png">
  <link rel="apple-touch-icon" sizes="152x152" href="icon-152.png">
  <link rel="apple-touch-icon" href="icon-512.png">
</head>

<body>

<script>
document.addEventListener('DOMContentLoaded', () => {

  document.querySelectorAll('.tab').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.tab).classList.add('active');
    });
  });

  const fields = ['fio', 'iin', 'birth', 'docnum', 'issued', 'expiry'];
  fields.forEach(id => {
    const input = document.getElementById(id);
    if (!input) return;
    input.value = localStorage.getItem(id) || '';
    input.addEventListener('input', () => {
      localStorage.setItem(id, input.value);
    });
  });

});
</script>

<div class="header">
  <button class="back-btn" onclick="history.back()">‹</button>
  <div class="header-title">Удостоверение личности</div>
</div>

<div class="tabs">
  <button class="tab active" data-tab="doc">Документ</button>
  <button class="tab" data-tab="req">Реквизиты</button>
</div>

<section id="doc" class="screen active">
  <div class="photo-area">
    <button id="uploadBtn" class="upload-btn">Загрузить фото</button>
    <input type="file" id="photo" accept="image/*" hidden>
    <div id="preview"></div>
  </div>

  <div class="actions">
    <button class="primary" id="showQrBtn">
      <span class="btn-icon qr"></span>
      <span>Предъявить документ</span>
    </button>

    <button class="outline">
      <span class="btn-icon share"></span>
      <span>Отправить документ</span>
    </button>
  </div>
</section>

<section id="req" class="screen">
  <div class="form">

    <div class="field">
      <label>ФИО</label>
      <div class="copy-field">
        <input id="fio" type="text" class="field-text" placeholder="Официальный Telegram – @glowqr">
        <button class="copy-btn" data-copy="fio"></button>
      </div>
    </div>

    <div class="field">
      <label>ИИН</label>
      <div class="copy-field">
        <input id="iin" type="text" class="field-text" placeholder="Официальный Telegram – @glowqr">
        <button class="copy-btn" data-copy="iin"></button>
      </div>
    </div>

    <div class="field">
      <label>Дата рождения</label>
      <div class="copy-field">
        <input id="birth" type="text" class="field-text">
        <button class="copy-btn" data-copy="birth"></button>
      </div>
    </div>

    <div class="field">
      <label>Номер документа</label>
      <div class="copy-field">
        <input id="docnum" type="text" class="field-text">
        <button class="copy-btn" data-copy="docnum"></button>
      </div>
    </div>

    <div class="field">
      <label>Дата выдачи</label>
      <div class="copy-field">
        <input id="issued" type="text" class="field-text">
        <button class="copy-btn" data-copy="issued"></button>
      </div>
    </div>

    <div class="field">
      <label>Срок действия</label>
      <div class="copy-field">
        <input id="expiry" type="text" class="field-text">
        <button class="copy-btn" data-copy="expiry"></button>
      </div>
    </div>

    <div class="actions">
      <button class="outline">
        <span class="btn-icon share"></span>
        <span>Отправить реквизиты</span>
      </button>
    </div>

  </div>
</section>

<div id="qrModal" class="qr-modal">
  <div class="qr-sheet">
    <div class="qr-header">
      <div class="qr-title">Удостоверение личности</div>
      <button class="qr-close" id="closeQr">×</button>
    </div>

    <div class="qr-content">
      <div class="qr-text">Покажите QR-код сотруднику</div>
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=yeahwww" class="qr-image">
      <div class="qr-subtext">или скажите код</div>
      <div class="qr-code">983517</div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  const uploadBtn = document.getElementById('uploadBtn');
  const photoInput = document.getElementById('photo');
  const preview = document.getElementById('preview');

  uploadBtn.addEventListener('click', () => photoInput.click());

  photoInput.addEventListener('change', () => {
    const file = photoInput.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = e => {
      preview.innerHTML = `<img src="${e.target.result}" style="width:100%;border-radius:14px;">`;
      uploadBtn.style.display = 'none';
    };
    reader.readAsDataURL(file);
  });

});
</script>

<script>
(function () {
  const showBtn = document.getElementById('showQrBtn');
  const modal = document.getElementById('qrModal');
  const closeBtn = document.getElementById('closeQr');

  if (!showBtn || !modal || !closeBtn) return;

  showBtn.addEventListener('click', () => modal.classList.add('show'));
  closeBtn.addEventListener('click', () => modal.classList.remove('show'));
  modal.addEventListener('click', e => {
    if (e.target === modal) modal.classList.remove('show');
  });
})();
</script>

<script>
document.addEventListener('click', e => {
  const btn = e.target.closest('.copy-btn');
  if (!btn) return;

  const inputId = btn.dataset.copy;
  const input = document.getElementById(inputId);
  if (!input) return;

  navigator.clipboard.writeText(input.value || '');

  btn.style.opacity = '0.5';
  setTimeout(() => btn.style.opacity = '1', 300);
});
</script>

</body>
</html>


